---
import StarIcon from "@assets/star.svg";
import { getYearMovie } from "@utils/getYearMovie";
import { roundedRating } from "@utils/roundedRating";
import { envConfig } from "../envConfig";

interface Props {
  title: string;
  release_date: string;
  vote_average: number;
  poster_path: string;
  linkMovie: string;
  movieId: string;
}
const {
  title,
  release_date,
  vote_average,
  poster_path,
  linkMovie,
  movieId,
}: Props = Astro.props;
const { publicImageApi } = envConfig;
---

<a href={linkMovie} class="group">
  <div class="bg-gray-800 rounded-lg relative overflow-hidden">
    <figure transition:name={`image-${movieId}`}>
      <img
        class="aspect-[2/3] object-cover w-full h-auto group-hover:scale-105 transition-all duration-300 ease-in-out group-hover:brightness-40"
        loading="lazy"
        src={`${publicImageApi}${poster_path}`}
        alt={title}
      />
    </figure>
    <div
      class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-10% from-black to-transparent p-2 pt-12"
    >
      <h3 class="truncate mt-1 font-semibold">
        {title}
      </h3>
      <p class="text-gray-400 text-sm">
        <StarIcon class="inline-block size-3 text-yellow-400 fill-amber-600" />
        <span>{roundedRating(vote_average)}</span>
      </p>
    </div>
    <div
      class="absolute bg-blue-500 bottom-1 right-1 p-1 font-semibold px-2 rounded-full text-xs"
    >
      <span>{getYearMovie(release_date)}</span>
    </div>
  </div>
</a>
